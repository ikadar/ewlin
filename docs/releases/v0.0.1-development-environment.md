# Release v0.0.1 â€“ Development Environment

> **Status:** ðŸ”´ Not Started
>
> **Milestone:** M0 (Infrastructure & Foundation)
>
> **Target Date:** â€”
>
> **Git Tag:** `v0.0.1`

---

## Overview

This release establishes the local development environment using Docker containers. It provides the foundational infrastructure (database, cache) that all subsequent releases will depend on.

This is a **infrastructure-only** release with no application code â€“ just container orchestration and configuration.

---

## Prerequisites

- [ ] Git repository initialized
- [ ] Docker and Docker Compose installed on development machines

---

## Scope

### In Scope

- Docker Compose configuration for local development
- MariaDB 10.11+ container with initial configuration
- Redis 7+ container configuration
- Shared Docker network for service communication
- Environment variable templates
- Health checks for all containers

### Out of Scope

- Application code (PHP, Node.js, Frontend)
- Production deployment configuration
- Kubernetes manifests
- CI/CD pipelines (covered in v0.0.6)

---

## Related Documentation

### Requirements

| Document | Sections |
|----------|----------|
| [Non-Functional Requirements](../requirements/non-functional-requirements.md) | Infrastructure, Performance baselines |

### Architecture

| Document | Sections |
|----------|----------|
| [Decision Records](../architecture/decision-records.md) | [ADR-005: Technology Stack Selection](../architecture/decision-records.md#adr-005--technology-stack-selection) |
| [Service Boundaries](../architecture/service-boundaries.md) | Section 5: Technology Mapping, Section 6: Deployment |
| [Project Structure](../architecture/project-structure.md) | Infrastructure layout |

### Roadmap

| Document | Sections |
|----------|----------|
| [Release Roadmap](../roadmap/release-roadmap.md) | Milestone 0, v0.0.1 |

---

## Technical Notes

### Container Versions

| Service | Image | Version | Port |
|---------|-------|---------|------|
| MariaDB | `mariadb` | 10.11+ | 3306 |
| Redis | `redis` | 7+ | 6379 |

### Network Configuration

- Network name: `flux-network`
- Driver: `bridge`
- All services on same network for inter-container communication

### Volume Strategy

- MariaDB data: Named volume `flux-mariadb-data` for persistence
- Redis: No persistence needed for development (in-memory cache)

### Environment Variables

Required `.env` variables:
- `MARIADB_ROOT_PASSWORD`
- `MARIADB_DATABASE`
- `MARIADB_USER`
- `MARIADB_PASSWORD`
- `REDIS_PASSWORD` (optional)

---

## Feature Checklist

### Docker Compose Setup

- [ ] **Create docker-compose.yml**
  - Description: Main Docker Compose file for local development
  - Files: `docker-compose.yml`
  - Tests: `docker compose config` validates syntax

- [ ] **Create .env.example**
  - Description: Template for environment variables
  - Files: `.env.example`
  - Tests: Document all required variables

- [ ] **Add .env to .gitignore**
  - Description: Ensure secrets are not committed
  - Files: `.gitignore`
  - Tests: Verify `.env` is ignored

### MariaDB Container

- [ ] **MariaDB service definition**
  - Description: MariaDB 10.11+ container configuration
  - Files: `docker-compose.yml` (mariadb service)
  - Tests: Container starts, accepts connections

- [ ] **MariaDB health check**
  - Description: Health check to verify database is ready
  - Files: `docker-compose.yml` (healthcheck)
  - Tests: `docker compose ps` shows healthy status

- [ ] **MariaDB volume configuration**
  - Description: Persistent volume for database data
  - Files: `docker-compose.yml` (volumes)
  - Tests: Data persists after `docker compose down`

- [ ] **MariaDB initialization script (optional)**
  - Description: SQL script to create initial schemas
  - Files: `docker/mariadb/init.sql`
  - Tests: Schemas exist after fresh start

### Redis Container

- [ ] **Redis service definition**
  - Description: Redis 7+ container configuration
  - Files: `docker-compose.yml` (redis service)
  - Tests: Container starts, accepts connections

- [ ] **Redis health check**
  - Description: Health check to verify Redis is ready
  - Files: `docker-compose.yml` (healthcheck)
  - Tests: `docker compose ps` shows healthy status

- [ ] **Redis configuration (optional)**
  - Description: Custom redis.conf if needed
  - Files: `docker/redis/redis.conf`
  - Tests: Configuration applied correctly

### Network Configuration

- [ ] **Create shared network**
  - Description: Docker network for service communication
  - Files: `docker-compose.yml` (networks)
  - Tests: Services can communicate by service name

### Documentation

- [ ] **Update README.md**
  - Description: Add setup instructions for development environment
  - Files: `README.md`
  - Tests: Instructions are clear and complete

- [ ] **Create docker/README.md**
  - Description: Document Docker setup details
  - Files: `docker/README.md`
  - Tests: Covers troubleshooting and common issues

---

## Testing Requirements

### Container Tests

- [ ] All containers start without errors: `docker compose up -d`
- [ ] All containers show healthy status: `docker compose ps`
- [ ] Containers restart correctly: `docker compose restart`
- [ ] Clean shutdown works: `docker compose down`

### Connectivity Tests

- [ ] MariaDB accepts connections on port 3306
  ```bash
  docker compose exec mariadb mysql -u${MARIADB_USER} -p${MARIADB_PASSWORD} -e "SELECT 1"
  ```

- [ ] Redis accepts connections on port 6379
  ```bash
  docker compose exec redis redis-cli ping
  # Expected: PONG
  ```

### Persistence Tests

- [ ] MariaDB data persists after restart
  ```bash
  # Create test data
  docker compose exec mariadb mysql -u${MARIADB_USER} -p${MARIADB_PASSWORD} -e "CREATE TABLE test.foo (id INT)"
  # Restart
  docker compose down && docker compose up -d
  # Verify
  docker compose exec mariadb mysql -u${MARIADB_USER} -p${MARIADB_PASSWORD} -e "SHOW TABLES FROM test"
  ```

### Network Tests

- [ ] Services can resolve each other by name
  ```bash
  docker compose exec redis ping mariadb -c 1
  ```

---

## Definition of Done

All items must be checked for the release to be considered complete:

- [ ] All feature checklist items completed
- [ ] All container tests passing
- [ ] All connectivity tests passing
- [ ] All persistence tests passing
- [ ] All network tests passing
- [ ] README.md updated with setup instructions
- [ ] CHANGELOG.md updated
- [ ] Git tag created: `v0.0.1`

---

## Release Notes Draft

```markdown
## v0.0.1 â€“ Development Environment

**Release Date:** YYYY-MM-DD

### Summary

Initial development environment setup using Docker Compose. Provides MariaDB
and Redis containers for local development with proper health checks and
persistent storage.

### What's New

- Docker Compose configuration for local development
- MariaDB 10.11+ container with health checks and persistent volume
- Redis 7+ container with health checks
- Shared Docker network for service communication
- Environment variable templates (.env.example)

### Getting Started

1. Copy `.env.example` to `.env` and configure values
2. Run `docker compose up -d`
3. Verify with `docker compose ps` (all services should be healthy)

### Requirements

- Docker 24.0+
- Docker Compose 2.20+
```

---

## Post-Release

- [ ] GitHub/GitLab release created
- [ ] Team notified
- [ ] All team members can run `docker compose up` successfully
- [ ] Next release (v0.0.2) can be started

---

## File Structure After Release

```
flux-scheduler/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â”œâ”€â”€ .env                    # (gitignored)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ mariadb/
â”‚   â”‚   â””â”€â”€ init.sql        # (optional)
â”‚   â””â”€â”€ redis/
â”‚       â””â”€â”€ redis.conf      # (optional)
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ ...
â””â”€â”€ README.md
```
