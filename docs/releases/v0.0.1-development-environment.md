# Release v0.0.1 â€“ Development Environment

> **Status:** ðŸš€ Released
>
> **Milestone:** M0 (Infrastructure & Foundation)
>
> **Completed:** 2025-12-11
>
> **Git Tag:** `v0.0.1`

---

## Overview

This release establishes the local development environment using Docker containers. It provides the foundational infrastructure (database, cache) that all subsequent releases will depend on.

This is a **infrastructure-only** release with no application code â€“ just container orchestration and configuration.

---

## Prerequisites

- [x] Git repository initialized
- [x] Docker and Docker Compose installed on development machines

---

## Scope

### In Scope

- Docker Compose configuration for local development
- MariaDB 10.11+ container with initial configuration
- Redis 7+ container configuration
- Shared Docker network for service communication
- Environment variable templates
- Health checks for all containers

### Out of Scope

- Application code (PHP, Node.js, Frontend)
- Production deployment configuration
- Kubernetes manifests
- CI/CD pipelines (covered in v0.0.6)

---

## Related Documentation

### Requirements

| Document | Sections |
|----------|----------|
| [Non-Functional Requirements](../requirements/non-functional-requirements.md) | Infrastructure, Performance baselines |

### Architecture

| Document | Sections |
|----------|----------|
| [Decision Records](../architecture/decision-records.md) | [ADR-005: Technology Stack Selection](../architecture/decision-records.md#adr-005--technology-stack-selection) |
| [Service Boundaries](../architecture/service-boundaries.md) | Section 5: Technology Mapping, Section 6: Deployment |
| [Project Structure](../architecture/project-structure.md) | Infrastructure layout |

### Roadmap

| Document | Sections |
|----------|----------|
| [Release Roadmap](../roadmap/release-roadmap.md) | Milestone 0, v0.0.1 |

---

## Technical Notes

### Container Versions

| Service | Image | Version | Port |
|---------|-------|---------|------|
| MariaDB | `mariadb` | 10.11+ | 3306 |
| Redis | `redis` | 7+ | 6379 |

### Network Configuration

- Network name: `flux-network`
- Driver: `bridge`
- All services on same network for inter-container communication

### Volume Strategy

- MariaDB data: Named volume `flux-mariadb-data` for persistence
- Redis: No persistence needed for development (in-memory cache)

### Environment Variables

Required `.env` variables:
- `MARIADB_ROOT_PASSWORD`
- `MARIADB_DATABASE`
- `MARIADB_USER`
- `MARIADB_PASSWORD`
- `REDIS_PASSWORD` (optional)

---

## Feature Checklist

### Docker Compose Setup

- [x] **Create docker-compose.yml**
  - Description: Main Docker Compose file for local development
  - Files: `docker-compose.yml`
  - Tests: `docker compose config` validates syntax âœ…

- [x] **Create .env.example**
  - Description: Template for environment variables
  - Files: `.env.example`
  - Tests: Document all required variables âœ…

- [x] **Add .env to .gitignore**
  - Description: Ensure secrets are not committed
  - Files: `.gitignore`
  - Tests: Verify `.env` is ignored âœ…

### MariaDB Container

- [x] **MariaDB service definition**
  - Description: MariaDB 10.11+ container configuration
  - Files: `docker-compose.yml` (mariadb service)
  - Tests: Container starts, accepts connections âœ…

- [x] **MariaDB health check**
  - Description: Health check to verify database is ready
  - Files: `docker-compose.yml` (healthcheck)
  - Tests: `docker compose ps` shows healthy status âœ…

- [x] **MariaDB volume configuration**
  - Description: Persistent volume for database data
  - Files: `docker-compose.yml` (volumes)
  - Tests: Data persists after `docker compose down` âœ…

- [x] **MariaDB initialization script**
  - Description: SQL script to create initial schemas
  - Files: `docker/mariadb/init/01-init.sql`
  - Tests: Grants applied after fresh start âœ…

### Redis Container

- [x] **Redis service definition**
  - Description: Redis 7+ container configuration
  - Files: `docker-compose.yml` (redis service)
  - Tests: Container starts, accepts connections âœ…

- [x] **Redis health check**
  - Description: Health check to verify Redis is ready
  - Files: `docker-compose.yml` (healthcheck)
  - Tests: `docker compose ps` shows healthy status âœ…

- [x] **Redis configuration**
  - Description: In-memory config with LRU eviction (128MB limit)
  - Files: `docker-compose.yml` (command args)
  - Tests: Configuration applied correctly âœ…

### Network Configuration

- [x] **Create shared network**
  - Description: Docker network for service communication
  - Files: `docker-compose.yml` (networks)
  - Tests: Services can communicate by service name âœ…

### Documentation

- [x] **Update README.md**
  - Description: Add setup instructions for development environment
  - Files: `README.md`
  - Tests: Instructions are clear and complete âœ…

- [x] **Create docker/README.md**
  - Description: Document Docker setup details
  - Files: `docker/README.md`
  - Tests: Covers troubleshooting and common issues âœ…

---

## Testing Requirements

### Container Tests

- [x] All containers start without errors: `docker compose up -d`
- [x] All containers show healthy status: `docker compose ps`
- [x] Containers restart correctly: `docker compose restart`
- [x] Clean shutdown works: `docker compose down`

### Connectivity Tests

- [x] MariaDB accepts connections on port 3307 (configurable)
  ```bash
  docker compose exec mariadb mysql -u${MARIADB_USER} -p${MARIADB_PASSWORD} -e "SELECT 1"
  ```

- [x] Redis accepts connections on port 6379
  ```bash
  docker compose exec redis redis-cli ping
  # Expected: PONG âœ…
  ```

### Persistence Tests

- [x] MariaDB data persists after restart (verified with named volume)

### Network Tests

- [x] Services can resolve each other by name
  ```bash
  docker compose exec redis ping mariadb -c 1
  # âœ… Verified: 172.21.0.3 responds
  ```

---

## Definition of Done

All items must be checked for the release to be considered complete:

- [x] All feature checklist items completed
- [x] All container tests passing
- [x] All connectivity tests passing
- [x] All persistence tests passing
- [x] All network tests passing
- [x] README.md updated with setup instructions
- [x] CHANGELOG.md updated
- [x] Git tag created: `v0.0.1` âœ…

---

## Release Notes Draft

```markdown
## v0.0.1 â€“ Development Environment

**Release Date:** 2025-12-11

### Summary

Initial development environment setup using Docker Compose. Provides MariaDB
and Redis containers for local development with proper health checks and
persistent storage.

### What's New

- Docker Compose configuration for local development
- MariaDB 10.11+ container with health checks and persistent volume
- Redis 7+ container with health checks
- Shared Docker network for service communication
- Environment variable templates (.env.example)

### Getting Started

1. Copy `.env.example` to `.env` and configure values
2. Run `docker compose up -d`
3. Verify with `docker compose ps` (all services should be healthy)

### Requirements

- Docker 24.0+
- Docker Compose 2.20+
```

---

## Post-Release

- [ ] GitHub/GitLab release created
- [ ] Team notified
- [ ] All team members can run `docker compose up` successfully
- [ ] Next release (v0.0.2) can be started

---

## File Structure After Release

```
flux-scheduler/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â”œâ”€â”€ .env                    # (gitignored)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ mariadb/
â”‚   â”‚   â””â”€â”€ init.sql        # (optional)
â”‚   â””â”€â”€ redis/
â”‚       â””â”€â”€ redis.conf      # (optional)
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ ...
â””â”€â”€ README.md
```
