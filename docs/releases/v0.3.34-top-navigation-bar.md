# Release v0.3.34 â€“ Top Navigation Bar

> **Status:** ðŸ”´ Not Started
>
> **Milestone:** M3 (Frontend Development)
>
> **Target Date:** 2025-12-22
>
> **Git Tag:** `v0.3.34`

---

## Overview

Add a horizontal navigation bar at the top of the screen containing global controls for the scheduling view: Quick Placement toggle button and vertical zoom control. This provides alternative UI access to keyboard-only features and enables users to adjust the grid's vertical scale.

---

## Prerequisites

- [x] `v0.3.33` released (Task Completion Toggle)

---

## Scope

### In Scope

- TopNavBar component (`h-12`, `bg-zinc-900`, `border-b border-white/5`)
- Logo/app name on left
- Quick Placement toggle button (center-left)
- Zoom control (center): `[-] 100% [+]` with levels 50%, 75%, 100%, 150%, 200%
- User/Settings placeholder on right
- Dynamic `pixelsPerHour` state (replacing constant `PIXELS_PER_HOUR`)
- Layout adjustment: TopNavBar at top, Sidebar + content below

### Out of Scope

- Actual user authentication/settings functionality
- Global timeline compaction buttons (separate release)

---

## Related Documentation

### Requirements

| Document | Sections |
|----------|----------|
| [Refactored Requirements](../ux-ui/tmp/refactored-new-requirements-en.md) | REQ-04, REQ-05, REQ-06 |

---

## Technical Notes

### Layout Structure Change

Current:
```
+--------+------------+-------------+------+----------+-------------------+
| SIDE-  |   JOBS     |    JOB      | DATE | TIMELINE |   STATION         |
| BAR    |   LIST     |   DETAILS   | STRIP|          |   COLUMNS         |
+--------+------------+-------------+------+----------+-------------------+
```

After:
```
+--------------------------------------------------------------------------------+
|  [Logo]    [Quick Placement]    [Zoom: -  100%  +]         [User] [Settings]   |
+--------------------------------------------------------------------------------+
+--------+------------+-------------+------+----------+-------------------+
| SIDE-  |   JOBS     |    JOB      | DATE | TIMELINE |   STATION         |
| BAR    |   LIST     |   DETAILS   | STRIP|          |   COLUMNS         |
+--------+------------+-------------+------+----------+-------------------+
```

### Zoom Levels

| Zoom % | pixelsPerHour | Effect |
|--------|---------------|--------|
| 50% | 40px | More hours visible, smaller tiles |
| 75% | 60px | More compact view |
| 100% | 80px | Current default |
| 150% | 120px | Larger tiles, fewer hours |
| 200% | 160px | More detailed view |

### Key Changes

1. **Remove constant `PIXELS_PER_HOUR`**: Convert to state in App.tsx
2. **Pass `pixelsPerHour` prop**: Timeline, SchedulingGrid, tiles need this value
3. **Quick Placement button**: Same behavior as ALT+Q, disabled when no job selected

---

## Feature Checklist

### TopNavBar Component

- [ ] **Create TopNavBar component**
  - Description: New component with logo, controls, and settings section
  - Files: `apps/web/src/components/TopNavBar/TopNavBar.tsx`
  - Tests: `apps/web/src/components/TopNavBar/TopNavBar.test.tsx`

- [ ] **Logo/App name**
  - Description: Flux branding on left side
  - Files: `apps/web/src/components/TopNavBar/TopNavBar.tsx`

- [ ] **Quick Placement toggle button**
  - Description: Toggle button for Quick Placement mode, disabled when no job selected
  - Files: `apps/web/src/components/TopNavBar/TopNavBar.tsx`

- [ ] **Zoom control**
  - Description: `[-] 100% [+]` buttons with dropdown for zoom levels
  - Files: `apps/web/src/components/TopNavBar/TopNavBar.tsx`

- [ ] **User/Settings placeholder**
  - Description: Right-side section with user/settings icons (disabled for MVP)
  - Files: `apps/web/src/components/TopNavBar/TopNavBar.tsx`

### State Management

- [ ] **Add pixelsPerHour state**
  - Description: Replace constant with state variable in App.tsx
  - Files: `apps/web/src/App.tsx`

- [ ] **Wire up Quick Placement toggle**
  - Description: Connect button to existing isQuickPlacementMode state
  - Files: `apps/web/src/App.tsx`

### Component Updates

- [ ] **Update TimelineColumn**
  - Description: Accept pixelsPerHour as prop instead of constant
  - Files: `apps/web/src/components/TimelineColumn/TimelineColumn.tsx`, `HourMarker.tsx`

- [ ] **Update SchedulingGrid**
  - Description: Accept and pass through pixelsPerHour prop
  - Files: `apps/web/src/components/SchedulingGrid/SchedulingGrid.tsx`

- [ ] **Update tile positioning calculations**
  - Description: Use pixelsPerHour prop for Y position calculations
  - Files: Multiple components using PIXELS_PER_HOUR

### Layout Integration

- [ ] **Update App layout**
  - Description: Add TopNavBar at top, adjust flex layout
  - Files: `apps/web/src/App.tsx`

- [ ] **Export TopNavBar**
  - Description: Add to components index
  - Files: `apps/web/src/components/index.ts`

---

## Testing Requirements

### Unit Tests

- [ ] TopNavBar: renders logo/app name
- [ ] TopNavBar: renders Quick Placement button
- [ ] TopNavBar: Quick Placement button disabled when no job selected
- [ ] TopNavBar: Quick Placement button enabled when job selected
- [ ] TopNavBar: Quick Placement button shows active state
- [ ] TopNavBar: zoom control shows current zoom level
- [ ] TopNavBar: zoom in/out buttons work
- [ ] TopNavBar: zoom reaches min/max limits

### E2E Tests

- [ ] Click Quick Placement button toggles mode
- [ ] Quick Placement button disabled when no job selected
- [ ] Zoom in increases tile height
- [ ] Zoom out decreases tile height
- [ ] Zoom levels persist during interaction

### Manual Testing

- [ ] Start dev server: `pnpm dev`
- [ ] Load app: `http://localhost:5173/`
- [ ] Verify TopNavBar appears at top
- [ ] Verify Quick Placement button works (select job first)
- [ ] Verify zoom controls change tile sizes
- [ ] Verify ALT+Q still works alongside button

---

## Manual QA Test Plan

### Test Fixtures

| Fixture | URL | Purpose |
|---------|-----|---------|
| Default | `http://localhost:5173/` | Standard mock data |

### Test Scenarios

#### Scenario 1: TopNavBar Layout

**Fixture:** Default

**Steps:**
1. Load the application
2. Observe the top of the screen

**Expected Results:**
- [ ] TopNavBar visible at the very top
- [ ] Logo/app name on left
- [ ] Quick Placement button visible
- [ ] Zoom control ([-] 100% [+]) visible
- [ ] User/Settings section on right (placeholders)
- [ ] Height is 48px (h-12)
- [ ] Background is dark zinc (bg-zinc-900)

#### Scenario 2: Quick Placement Button

**Fixture:** Default

**Steps:**
1. Observe Quick Placement button before selecting a job
2. Select a job from the Jobs List
3. Click the Quick Placement button
4. Click the button again

**Expected Results:**
- [ ] Button disabled before job selection (grayed out)
- [ ] Button enabled after job selection
- [ ] First click: Quick Placement mode activates (button shows active state)
- [ ] Quick Placement indicator appears on grid
- [ ] Second click: mode deactivates
- [ ] ALT+Q still works as keyboard alternative

#### Scenario 3: Zoom Control

**Fixture:** Default

**Steps:**
1. Note current tile sizes (100% zoom)
2. Click the [-] button twice (to 50%)
3. Observe tile sizes
4. Click the [+] button four times (to 200%)
5. Observe tile sizes

**Expected Results:**
- [ ] Initial zoom shows "100%"
- [ ] After [-] twice: shows "50%", tiles are smaller
- [ ] More hours visible on screen at 50%
- [ ] After [+] four times: shows "200%", tiles are larger
- [ ] Fewer hours visible at 200%
- [ ] Timeline hour markers scale with zoom

#### Scenario 4: Layout Integration

**Fixture:** Default

**Steps:**
1. Load the application
2. Scroll the scheduling grid vertically
3. Scroll horizontally if many stations

**Expected Results:**
- [ ] TopNavBar stays fixed at top
- [ ] Sidebar starts below TopNavBar
- [ ] Grid scrolls independently
- [ ] No visual glitches at boundaries

---

## Definition of Done

All items must be checked for the release to be considered complete:

- [ ] All feature checklist items completed
- [ ] All unit tests passing
- [ ] All E2E tests passing
- [ ] Manual testing completed
- [ ] TypeScript compilation passes
- [ ] ESLint passes
- [ ] Git tag created: `v0.3.34`

---

## Release Notes Draft

```markdown
## v0.3.34 â€“ Top Navigation Bar

**Release Date:** 2025-12-22

### Summary

Adds a horizontal navigation bar at the top of the scheduling view with Quick Placement toggle button and vertical zoom control. This provides visual UI alternatives to keyboard shortcuts and allows users to adjust the grid's vertical scale.

### What's New

- New TopNavBar component at top of screen
- Quick Placement toggle button (alternative to ALT+Q)
- Zoom control: 50%, 75%, 100%, 150%, 200% levels
- Dynamic grid scaling based on zoom level

### Technical Details

- `pixelsPerHour` is now a state variable instead of constant
- TopNavBar uses `h-12`, `bg-zinc-900`, `border-b border-white/5`
- Quick Placement button disabled when no job is selected
- Zoom affects timeline, tiles, and all Y-position calculations
```

---

## Post-Release

- [ ] GitHub release created
- [ ] Tag pushed to ux-ui-development
