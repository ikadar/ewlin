# Release v0.3.4 – Job Details Panel

> **Status:** ✅ Released
>
> **Milestone:** M3 (Frontend Integration)
>
> **Target Date:** 2025-12-16
>
> **Git Tag:** `v0.3.4`

---

## Overview

This release implements the Job Details Panel, which displays comprehensive information about the selected job and its task list. The panel shows job metadata (Code, Client, Intitulé, Départ), status indicators (BAT, Papier, Plaques), and a visual task list with different styling for scheduled vs unscheduled tasks.

---

## Prerequisites

- [x] v0.3.3 - Jobs List Component released
- [x] Mock API with job and task data available

---

## Scope

### In Scope

- **Job Details container** - Fixed width panel with sections
- **Job Information section** - Code, Client, Intitulé, Départ fields
- **Status section** - BAT, Papier, Plaques (read-only display)
- **Task List section** - Visual task tiles
- **Unscheduled task styling** - Job color, border-l-4, draggable cursor
- **Scheduled task styling** - Dark placeholder with station + datetime
- **Conditional visibility** - Show panel only when job selected

### Out of Scope

- Task drag-and-drop functionality (requires grid integration)
- Click to scroll grid (requires grid component)
- Double-click to recall (requires grid integration)
- Editing job details or status
- Task reordering within list

---

## Related Documentation

### UX/UI Specification

| Document | Sections |
|----------|----------|
| [Job Details Panel](../ux-ui/05-components/job-details-panel.md) | Full specification |
| [Mockup](../ux-ui/dark-prettier.html) | Column 2: Job Details (line 523) |

---

## Technical Notes

### Dimensions

| Property | Value |
|----------|-------|
| Width | 288px (w-72) |
| Height | Full viewport height |
| Background | `bg-zinc-900/50` |
| Border | `border-r border-white/5` |

### Job Info Fields

| Field | Label | Example |
|-------|-------|---------|
| Code | "CODE" | 12345 (monospace) |
| Client | "CLIENT" | Autosphere |
| Intitulé | "INTITULÉ" | Brochures Autosphère accueil |
| Départ | "DÉPART" | 18/12/2025 |

### Status Fields

| Field | Label | Example Values |
|-------|-------|----------------|
| BAT | "BAT" | Reçu 12/12 14:30, En attente, Approuvé |
| Papier | "PAPIER" | Commandé, En stock, Reçu |
| Plaques | "PLAQUES" | Prêtes, À faire, Faites |

### Task Tile Styling

| State | Border | Background | Text | Cursor |
|-------|--------|------------|------|--------|
| Unscheduled | `border-l-4 border-l-{color}` | `bg-{color}/35` | Job color | `cursor-grab` |
| Scheduled | `border-l-4 border-slate-700` | `bg-slate-800/40` | zinc-400/500 | `cursor-pointer` |

---

## Feature Checklist

### Container

- [x] **JobDetailsPanel container**
  - Description: Fixed-width panel with flex column layout
  - Files: `apps/web/src/components/JobDetailsPanel/JobDetailsPanel.tsx`
  - Styling: w-72, shrink-0, bg-zinc-900/50, border-r border-white/5

- [x] **Conditional rendering**
  - Description: Only show when a job is selected
  - Files: `apps/web/src/components/JobDetailsPanel/JobDetailsPanel.tsx`
  - Props: job, tasks

### Job Information Section

- [x] **JobInfo component**
  - Description: Displays Code, Client, Intitulé, Départ
  - Files: `apps/web/src/components/JobDetailsPanel/JobInfo.tsx`
  - Styling: p-3, border-b, space-y-2.5, text-sm

- [x] **Field display component**
  - Description: Label + value pair with consistent styling
  - Files: `apps/web/src/components/JobDetailsPanel/InfoField.tsx`
  - Label: text-zinc-500, text-xs, uppercase, tracking-wide
  - Value: text-zinc-200

### Status Section

- [x] **JobStatus component**
  - Description: Displays BAT, Papier, Plaques status
  - Files: `apps/web/src/components/JobDetailsPanel/JobStatus.tsx`
  - Styling: Same section styling, with separator line

- [x] **Status value formatting**
  - Description: Format status values for display
  - Files: `apps/web/src/components/JobDetailsPanel/JobStatus.tsx`

### Task List Section

- [x] **TaskList component**
  - Description: Scrollable list of task tiles
  - Files: `apps/web/src/components/JobDetailsPanel/TaskList.tsx`
  - Styling: p-3, space-y-2, overflow-y-auto, flex-grow, bg-zinc-900/30

- [x] **TaskTile component**
  - Description: Individual task display with state-based styling
  - Files: `apps/web/src/components/JobDetailsPanel/TaskTile.tsx`
  - Props: task, job (for color), isScheduled

- [x] **Unscheduled task styling**
  - Description: Full job color, border-l-4, cursor-grab
  - Files: `apps/web/src/components/JobDetailsPanel/TaskTile.tsx`
  - Content: Station, Duration

- [x] **Scheduled task styling**
  - Description: Dark placeholder with station + datetime
  - Files: `apps/web/src/components/JobDetailsPanel/TaskTile.tsx`
  - Content: Station, Scheduled time

### Exports

- [x] **Component exports**
  - Description: Export all JobDetailsPanel components
  - Files: `apps/web/src/components/JobDetailsPanel/index.ts`, `apps/web/src/components/index.ts`

### App Integration

- [x] **Add JobDetailsPanel to App layout**
  - Description: Place after JobsList, conditionally visible
  - Files: `apps/web/src/App.tsx`

---

## Testing Requirements

### Unit Tests

- [x] JobDetailsPanel renders when job is selected
- [x] JobDetailsPanel doesn't render when no job selected
- [x] JobInfo displays all required fields
- [x] JobStatus displays all status fields
- [x] TaskList renders task tiles
- [x] TaskTile shows correct styling for unscheduled state
- [x] TaskTile shows correct styling for scheduled state
- [x] Task duration is formatted correctly

---

## Definition of Done

All items must be checked for the release to be considered complete:

- [x] All feature checklist items completed
- [x] All unit tests passing (173/173)
- [x] TypeScript compiles without errors
- [x] Lint passes
- [x] Documentation updated
- [x] Git tag created: `v0.3.4`

---

## Release Notes Draft

```markdown
## v0.3.4 – Job Details Panel

**Release Date:** 2025-12-16

### Summary

Job Details Panel showing selected job information and task list.

### What's New

- Job Details Panel (w-72, fixed width)
- Job information display (Code, Client, Intitulé, Départ)
- Job status display (BAT, Papier, Plaques)
- Task list with visual tiles
- Unscheduled tasks: job color styling, draggable cursor
- Scheduled tasks: dark placeholder with station + datetime
- Conditional visibility based on job selection

### Technical

- Integration with mock snapshot data
- Task status-based conditional styling
- Lucide React icons if needed
- Tailwind CSS styling matching mockup
```

---

## File Structure

```
apps/web/src/components/
├── JobDetailsPanel/
│   ├── index.ts              # Exports
│   ├── JobDetailsPanel.tsx   # Main container
│   ├── JobDetailsPanel.test.tsx # Tests
│   ├── JobInfo.tsx           # Job info section
│   ├── JobStatus.tsx         # Status section
│   ├── InfoField.tsx         # Reusable field component
│   ├── TaskList.tsx          # Task list section
│   └── TaskTile.tsx          # Individual task tile
└── index.ts                  # Updated exports
```
