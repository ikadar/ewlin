# Release v0.3.8 – Station Columns

> **Status:** ✅ Implemented (on ux-ui-development)
>
> **Milestone:** M3 (Frontend Integration)
>
> **Target Date:** 2025-12-16
>
> **Git Tag:** `v0.3.8`

---

## Overview

This release implements the Station Columns component, which displays the main scheduling grid area. Each station gets a column showing hour grid lines, unavailability overlay (hatched pattern), and departure date markers for the selected job.

---

## Prerequisites

- [x] v0.3.7 - Station Column Headers released

---

## Scope

### In Scope

- **StationColumns container** - Horizontal scroll container with synchronized vertical scroll
- **StationColumn component** - Individual station column (w-60)
- **Hour grid lines** - Horizontal lines at each hour
- **Unavailability overlay** - Hatched pattern for non-operating periods
- **Departure date marker** - Blue horizontal line for selected job deadline
- **Now line** - Red horizontal line spanning all columns

### Out of Scope

- Tiles (scheduled task assignments) - v0.3.9
- Similarity indicators - v0.3.10
- Drag & drop - v0.3.11+
- Tile click interactions

---

## Related Documentation

### UX/UI Specification

| Document | Sections |
|----------|----------|
| [Scheduling Grid](../ux-ui/05-components/scheduling-grid.md) | Station Columns section |
| [Mockup](../ux-ui/dark-prettier.html) | Column 5: Station columns (line 872-1050) |

---

## Technical Notes

### Container Dimensions

| Property | Value |
|----------|-------|
| Layout | `flex gap-3 px-3` |
| Background | `bg-[#050505]` |
| Overflow | `overflow-auto` (both directions) |
| Height | Full remaining height |

### Column Dimensions

| Property | Value |
|----------|-------|
| Width | 240px (w-60) |
| Background | `bg-[#0a0a0a]` |
| Position | `relative` |
| Shrink | `shrink-0` |

### Hour Grid Lines

| Property | Value |
|----------|-------|
| Height | 1px (h-px) |
| Color | `bg-zinc-700/50` |
| Spacing | 80px apart (PIXELS_PER_HOUR) |

### Unavailability Overlay

```css
.bg-stripes-dark {
  background-image: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 10px,
    rgba(255,255,255,0.03) 10px,
    rgba(255,255,255,0.03) 20px
  );
}
```

### Now Line (spanning all columns)

| Property | Value |
|----------|-------|
| Position | Absolute, left-0 right-0 |
| Height | 2px (h-0.5) |
| Color | `bg-red-500` |
| Z-index | z-20 |
| Pointer events | `pointer-events-none` |

### Departure Date Marker

| Property | Value |
|----------|-------|
| Position | Absolute, left-0 right-0 |
| Height | 2px (h-0.5) |
| Color | `bg-blue-500` |
| Z-index | z-20 |
| Pointer events | `pointer-events-none` |
| Visibility | Only when job is selected |

### Mockup Code Reference

**Station columns container:**
```html
<div class="flex gap-3 px-3 bg-[#050505] relative flex-1 overflow-auto" style="height: 1920px;">
  <!-- Now line spanning all stations -->
  <div class="absolute left-0 right-0 h-0.5 bg-red-500 z-20 pointer-events-none" style="top: 413px;"></div>
  <!-- Departure date marker -->
  <div class="absolute left-0 right-0 h-0.5 bg-blue-500 z-20 pointer-events-none" style="top: 960px;"></div>
```

**Individual station column:**
```html
<div class="w-60 shrink-0 bg-[#0a0a0a] relative">
  <!-- Unavailability overlay -->
  <div class="absolute left-0 right-0 bg-stripes-dark" style="top: 0px; height: 80px;"></div>
  <!-- Hour grid lines -->
  <div class="absolute left-0 right-0 h-px bg-zinc-700/50" style="top: 0px;"></div>
  <div class="absolute left-0 right-0 h-px bg-zinc-700/50" style="top: 80px;"></div>
  <!-- ... more grid lines ... -->
</div>
```

---

## Feature Checklist

### Container

- [x] **StationColumns container**
  - Description: Scrollable container for all station columns
  - Files: `apps/web/src/components/StationColumns/StationColumns.tsx`
  - Props: stations, startHour, endHour, selectedJob

- [x] **Now line overlay**
  - Description: Red horizontal line at current time spanning all columns
  - Files: `apps/web/src/components/SchedulingGrid/SchedulingGrid.tsx`
  - Styling: absolute, h-0.5 bg-red-500 z-10 pointer-events-none

- [x] **Departure date marker**
  - Description: Blue horizontal line for selected job deadline
  - Files: `apps/web/src/components/SchedulingGrid/SchedulingGrid.tsx`
  - Props: selectedJob.workshopExitDate
  - Styling: absolute, h-0.5 bg-blue-500 z-10 pointer-events-none

### Column Component

- [x] **StationColumn component**
  - Description: Individual station column with grid and overlays
  - Files: `apps/web/src/components/StationColumns/StationColumn.tsx`
  - Props: station, startHour, hoursToDisplay, dayOfWeek

- [x] **Hour grid lines**
  - Description: Horizontal lines at each hour
  - Files: `apps/web/src/components/StationColumns/StationColumn.tsx`
  - Styling: h-px bg-zinc-700/50, spaced 80px apart

- [x] **Unavailability overlay**
  - Description: Hatched pattern for non-operating periods
  - Files: `apps/web/src/components/StationColumns/UnavailabilityOverlay.tsx`
  - Styling: bg-stripes-dark (CSS custom class in index.css)

### Styling

- [x] **Add bg-stripes-dark CSS**
  - Description: Hatched pattern CSS class
  - Files: `apps/web/src/index.css`

### Unified Grid

- [x] **SchedulingGrid component**
  - Description: Unified grid with synchronized scrolling
  - Files: `apps/web/src/components/SchedulingGrid/SchedulingGrid.tsx`
  - Features: Timeline (sticky left), Headers (sticky top), Columns

### Exports

- [x] **Component exports**
  - Description: Export StationColumns and subcomponents
  - Files: `apps/web/src/components/StationColumns/index.ts`, `apps/web/src/components/index.ts`

### App Integration

- [x] **Integrate SchedulingGrid in App**
  - Description: Replace placeholder with SchedulingGrid component
  - Files: `apps/web/src/App.tsx`

---

## Testing Requirements

### Unit Tests

- [x] StationColumns renders all station columns
- [x] StationColumn has correct width (w-60)
- [x] Hour grid lines are rendered correctly
- [x] Unavailability overlay shows for non-operating periods
- [x] Now line is positioned correctly
- [x] Departure marker is visible when job selected
- [x] Departure marker is hidden when no job selected
- [x] SchedulingGrid has synchronized scrolling structure
- [x] SchedulingGrid renders timeline, headers, and columns

---

## Definition of Done

All items must be checked for the release to be considered complete:

- [x] All feature checklist items completed
- [x] All unit tests passing (255 tests)
- [x] TypeScript compiles without errors
- [x] Lint passes
- [x] Documentation updated
- [ ] Git tag created: `v0.3.8` (after merge to main)

---

## Release Notes Draft

```markdown
## v0.3.8 – Station Columns

**Release Date:** 2025-12-16

### Summary

Station Columns component for the main scheduling grid area with hour grid lines, unavailability overlays, and departure markers.

### What's New

- StationColumns container (horizontal scroll)
- StationColumn cells (w-60)
- Hour grid lines (80px spacing)
- Unavailability overlay (hatched pattern)
- Now line spanning all columns (red)
- Departure date marker for selected job (blue)

### Technical

- Uses PIXELS_PER_HOUR constant from TimelineColumn
- Operating schedule integration for unavailability
- Synchronized vertical scroll with TimelineColumn
- Tailwind CSS styling matching mockup
```

---

## File Structure

```
apps/web/src/components/
├── StationColumns/
│   ├── index.ts                    # Exports
│   ├── StationColumns.tsx          # Main container
│   ├── StationColumns.test.tsx     # Tests
│   ├── StationColumn.tsx           # Individual column
│   └── UnavailabilityOverlay.tsx   # Hatched overlay
└── index.ts                        # Updated exports
```
