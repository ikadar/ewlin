# Release v0.3.9 â€“ Tile Component

> **Status:** ðŸ”´ Not Started
>
> **Milestone:** M3 (Frontend Integration)
>
> **Target Date:** 2025-12-16
>
> **Git Tag:** `v0.3.9`

---

## Overview

This release implements the Tile Component, which represents a scheduled task assignment on the grid. Tiles display job color, setup/run sections, completion status, and swap buttons.

---

## Prerequisites

- [x] v0.3.8 - Station Columns released

---

## Scope

### In Scope

- **Tile component** - Main tile displaying task assignment
- **Job color styling** - Border-l-4 + low-opacity background
- **Setup/Run sections** - Lighter shade (setup) + full color (run)
- **Content display** - Completion icon + job reference + client
- **Completion states** - circle/circle-check icons with gradient
- **Swap buttons** - Chevron up/down (hover only)
- **Click behavior** - Single click = select job, double click = recall
- **Integration with SchedulingGrid**

### Out of Scope

- Similarity indicators (v0.3.10)
- Actual drag & drop (v0.3.11)
- Actual recall API call (placeholder callback)
- Completion toggle API call (placeholder callback)

---

## Related Documentation

### UX/UI Specification

| Document | Sections |
|----------|----------|
| [Tile Component](../ux-ui/05-components/tile-component.md) | Full specification |
| [Mockup](../ux-ui/dark-prettier.html) | Tiles in station columns (line 886-948) |

---

## Technical Notes

### Tile Container

| Property | Value |
|----------|-------|
| Position | `absolute left-0 right-0` |
| Border | `border-l-4 border-l-{color}-500` |
| Font | `text-sm` |
| Group | `group` (for hover states) |

### Setup Section

| Property | Value |
|----------|-------|
| Position | `absolute left-0 right-0 top-0` |
| Background | `bg-{color}-900/40` |
| Border | `border-b border-{color}-700/30` |
| Height | Proportional to setupMinutes (using PIXELS_PER_HOUR) |

### Run Section

| Property | Value |
|----------|-------|
| Position | `absolute left-0 right-0` |
| Background | `bg-{color}-950/35` |
| Padding | `pt-0.5 px-2` |
| Height | Proportional to runMinutes |

### Content

| Property | Value |
|----------|-------|
| Layout | `flex items-center gap-2` |
| Icon (incomplete) | `circle`, `w-4 h-4 text-zinc-600` |
| Icon (complete) | `circle-check`, `w-4 h-4 text-emerald-500` |
| Text | `text-{color}-300 font-medium truncate` |
| Format | `{reference} Â· {client}` |

### Completed Tile Gradient

```css
background-image: linear-gradient(to right, rgba(34,197,94,0.4) 0%, transparent 80%);
```

### Swap Buttons

| Property | Value |
|----------|-------|
| Position | `absolute bottom-2 right-2` |
| Layout | `flex gap-1` |
| Visibility | `opacity-0 group-hover:opacity-100 transition-opacity` |
| Button | `w-6 h-6 flex items-center justify-center rounded bg-white/10 hover:bg-white/20` |
| Icon | `w-4 h-4 text-zinc-400 hover:text-white` |

### Mockup Code Reference

**Completed tile with setup/run:**
```html
<div class="absolute left-0 right-0 text-sm border-l-4 border-l-purple-500 group" style="top: 80px; height: 200px;">
  <!-- Setup section -->
  <div class="absolute left-0 right-0 bg-purple-900/40 border-b border-purple-700/30"
       style="top: 0; height: 27px; background-image: linear-gradient(to right, rgba(34,197,94,0.3) 0%, transparent 80%);"></div>
  <!-- Run section -->
  <div class="absolute left-0 right-0 bg-purple-950/35 pt-0.5 px-2"
       style="top: 27px; height: 173px; background-image: linear-gradient(to right, rgba(34,197,94,0.4) 0%, transparent 80%);">
    <div class="flex items-center gap-2">
      <i data-lucide="circle-check" class="w-4 h-4 text-emerald-500 shrink-0"></i>
      <span class="text-purple-300 font-medium truncate">12345 Â· Autosphere</span>
    </div>
  </div>
  <!-- Swap buttons -->
  <div class="absolute bottom-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
    <button class="w-6 h-6 flex items-center justify-center rounded bg-white/10 hover:bg-white/20 text-zinc-400 hover:text-white">
      <i data-lucide="chevron-up" class="w-4 h-4"></i>
    </button>
    <button class="w-6 h-6 flex items-center justify-center rounded bg-white/10 hover:bg-white/20 text-zinc-400 hover:text-white">
      <i data-lucide="chevron-down" class="w-4 h-4"></i>
    </button>
  </div>
</div>
```

**Simple unchecked tile:**
```html
<div class="absolute left-0 right-0 pt-0.5 px-2 text-sm border-l-4 border-l-rose-500 bg-rose-950/35" style="top: 280px; height: 160px;">
  <div class="flex items-center gap-2">
    <i data-lucide="circle" class="w-4 h-4 text-zinc-600 shrink-0"></i>
    <span class="text-rose-300 font-medium truncate">22342 Â· BNP Paribas</span>
  </div>
</div>
```

---

## Job Color Mapping

Since Tailwind classes are static, we need a color mapping utility:

| Job Color Hex | Tailwind Color |
|---------------|----------------|
| #8B5CF6 | purple |
| #F43F5E | rose |
| #EAB308 | yellow |
| #14B8A6 | teal |
| #22C55E | green |
| #06B6D4 | cyan |
| #3B82F6 | blue |
| #EC4899 | pink |
| #F97316 | orange |
| #A855F7 | violet |
| #84CC16 | lime |
| #D946EF | fuchsia |

---

## Feature Checklist

### Tile Component

- [ ] **Tile container**
  - Description: Main tile wrapper with border and positioning
  - Files: `apps/web/src/components/Tile/Tile.tsx`
  - Props: assignment, task, job, onSelect, onRecall, onSwap

- [ ] **Setup section**
  - Description: Lighter colored top section for setup time
  - Files: `apps/web/src/components/Tile/Tile.tsx`
  - Styling: bg-{color}-900/40, border-b

- [ ] **Run section**
  - Description: Full colored section for run time
  - Files: `apps/web/src/components/Tile/Tile.tsx`
  - Styling: bg-{color}-950/35

- [ ] **Content display**
  - Description: Completion icon + reference + client
  - Files: `apps/web/src/components/Tile/Tile.tsx`
  - Format: `{reference} Â· {client}`

- [ ] **Completion states**
  - Description: circle/circle-check with green gradient
  - Files: `apps/web/src/components/Tile/Tile.tsx`
  - Icons: Lucide circle, circle-check

### Swap Buttons

- [ ] **SwapButtons component**
  - Description: Hover-visible chevron up/down buttons
  - Files: `apps/web/src/components/Tile/SwapButtons.tsx`
  - Props: onSwapUp, onSwapDown

### Color Utilities

- [ ] **Job color mapping**
  - Description: Hex to Tailwind color class mapping
  - Files: `apps/web/src/components/Tile/colorUtils.ts`

### Click Handlers

- [ ] **Single click - select job**
  - Description: Select job when tile is clicked
  - Files: `apps/web/src/components/Tile/Tile.tsx`

- [ ] **Double click - recall tile**
  - Description: Recall tile (remove from schedule)
  - Files: `apps/web/src/components/Tile/Tile.tsx`

### Integration

- [ ] **SchedulingGrid integration**
  - Description: Render tiles in station columns
  - Files: `apps/web/src/components/SchedulingGrid/SchedulingGrid.tsx`

### Exports

- [ ] **Component exports**
  - Description: Export Tile and subcomponents
  - Files: `apps/web/src/components/Tile/index.ts`, `apps/web/src/components/index.ts`

---

## Testing Requirements

### Unit Tests

- [ ] Tile renders job reference and client
- [ ] Tile displays correct completion icon
- [ ] Completed tile shows green gradient
- [ ] Setup section has correct height
- [ ] Run section has correct height
- [ ] Swap buttons visible on hover
- [ ] Single click calls onSelect
- [ ] Double click calls onRecall
- [ ] Color mapping returns correct classes

---

## Definition of Done

All items must be checked for the release to be considered complete:

- [ ] All feature checklist items completed
- [ ] All unit tests passing
- [ ] TypeScript compiles without errors
- [ ] Lint passes
- [ ] Documentation updated
- [ ] Git tag created: `v0.3.9`

---

## Release Notes Draft

```markdown
## v0.3.9 â€“ Tile Component

**Release Date:** 2025-12-16

### Summary

Tile component for displaying scheduled task assignments on the grid with job colors, completion states, and swap buttons.

### What's New

- Tile component with setup/run sections
- Job color styling (border + background)
- Completion icon (circle/circle-check)
- Green gradient for completed tiles
- Swap buttons (hover)
- Click behavior (select/recall)
- Integration with SchedulingGrid

### Technical

- Lucide React icons for completion and swap
- Color mapping utility for Tailwind classes
- PIXELS_PER_HOUR for height calculation
```

---

## File Structure

```
apps/web/src/components/
â”œâ”€â”€ Tile/
â”‚   â”œâ”€â”€ index.ts           # Exports
â”‚   â”œâ”€â”€ Tile.tsx           # Main component
â”‚   â”œâ”€â”€ Tile.test.tsx      # Tests
â”‚   â”œâ”€â”€ SwapButtons.tsx    # Swap buttons
â”‚   â””â”€â”€ colorUtils.ts      # Color mapping
â”œâ”€â”€ SchedulingGrid/
â”‚   â””â”€â”€ SchedulingGrid.tsx # Updated with tiles
â””â”€â”€ index.ts               # Updated exports
```
