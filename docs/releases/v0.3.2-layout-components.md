# Release v0.3.2 – Layout Components

> **Status:** ✅ Released
>
> **Milestone:** M3 (Frontend Integration)
>
> **Release Date:** 2025-12-14
>
> **Git Tag:** `v0.3.2`

---

## Overview

This release restructures the frontend layout to match the UX/UI specification. The main scheduling page will have a 3-column layout:

- **Left Panel:** Jobs context (Jobs List, Task List, Status Bar, Date Strip)
- **Center Panel:** Scheduling Grid with station columns
- **Right Panel:** Schedule health (Late Jobs, Violations)

Key deliverables:
- 3-column layout with collapsible panels
- Header component with navigation
- Panel collapse/expand functionality
- Mock data factories for Storybook and unit tests
- Responsive breakpoints

---

## Prerequisites

- [x] `v0.2.18` released (Backend API complete)
- [x] Frontend project foundation (v0.0.5)
- [x] React 19 + TypeScript + Tailwind CSS 4

---

## Scope

### In Scope

- Main layout restructure (3-column: Left / Center / Right)
- Header component with logo and navigation
- Panel wrapper components (LeftPanel, CenterPanel, RightPanel)
- Panel collapse/expand toggle buttons
- Responsive breakpoints (collapse panels on smaller screens)
- Mock data factories for Schedule, Station, Job, Task entities
- Basic Storybook setup for layout components

### Out of Scope

- Actual panel content (Jobs List, Task List, etc. - future releases)
- Drag & drop functionality
- API integration
- Full responsive mobile layout

---

## Related Documentation

### UX/UI

| Document | Sections |
|----------|----------|
| [UX/UI Overview](../ux-ui/00-overview.md) | Screen Layout, Design Philosophy |
| [Left Panel](../ux-ui/05-components/left-panel.md) | Structure |
| [Right Panel](../ux-ui/05-components/right-panel.md) | Structure |
| [Scheduling Grid](../ux-ui/05-components/scheduling-grid.md) | Overview |

### Architecture

| Document | Sections |
|----------|----------|
| [Decision Records](../architecture/decision-records.md) | ADR-010 (Isomorphic validation) |

---

## Technical Notes

### Layout Structure

```
+------------------+--------------------------------+------------------+
|                  |                                |                  |
|   LEFT PANEL     |         CENTER GRID            |   RIGHT PANEL    |
|   (collapsible)  |         (flex-grow)            |   (collapsible)  |
|                  |                                |                  |
|   Width: 280px   |   Width: remaining space       |   Width: 260px   |
|                  |                                |                  |
+------------------+--------------------------------+------------------+
```

### Panel Collapse Behavior

- Left panel: collapses to icon strip (48px)
- Right panel: collapses to icon strip (48px)
- Center panel: expands to fill available space
- Collapse toggle: button in panel header

### Responsive Breakpoints

| Breakpoint | Behavior |
|------------|----------|
| `>= 1280px` (xl) | All panels visible |
| `>= 1024px` (lg) | Right panel collapsed by default |
| `>= 768px` (md) | Both side panels collapsed by default |
| `< 768px` (sm) | Side panels hidden, center only |

### Mock Data Factories

Located in `src/mock/factories/`:
- `stationFactory.ts` - Station, StationCategory, StationGroup
- `jobFactory.ts` - Job with tasks
- `assignmentFactory.ts` - TaskAssignment
- `snapshotFactory.ts` - Full ScheduleSnapshot

---

## Feature Checklist

### Layout Components

- [x] **MainLayout**
  - Description: Root layout with 3-column structure
  - Files: `src/components/layout/MainLayout.tsx`
  - Tests: `src/components/layout/__tests__/MainLayout.test.tsx`

- [x] **Header**
  - Description: Updated header with logo, title, and view toggle
  - Files: `src/components/layout/Header.tsx` (existing, integrated)
  - Tests: via MainLayout tests

- [x] **LeftPanel**
  - Description: Collapsible left panel wrapper
  - Files: `src/components/layout/LeftPanel.tsx`
  - Tests: `src/components/layout/__tests__/LeftPanel.test.tsx`

- [x] **CenterPanel**
  - Description: Center panel wrapper for scheduling grid
  - Files: `src/components/layout/CenterPanel.tsx`
  - Tests: `src/components/layout/__tests__/CenterPanel.test.tsx`

- [x] **RightPanel**
  - Description: Collapsible right panel wrapper
  - Files: `src/components/layout/RightPanel.tsx`
  - Tests: `src/components/layout/__tests__/RightPanel.test.tsx`

- [x] **PanelHeader**
  - Description: Reusable panel header with title and collapse toggle
  - Files: `src/components/layout/PanelHeader.tsx`
  - Tests: `src/components/layout/__tests__/PanelHeader.test.tsx`

### State Management

- [x] **Layout UI State**
  - Description: Panel collapse state in Redux
  - Files: `src/store/uiSlice.ts` (modify)
  - Tests: `src/store/__tests__/uiSlice.test.ts`

### Mock Data Factories

- [x] **Station Factory**
  - Description: Generate mock stations, categories, groups
  - Files: `src/mock/factories/stationFactory.ts`
  - Tests: `src/mock/factories/__tests__/stationFactory.test.ts`

- [x] **Job Factory**
  - Description: Generate mock jobs with tasks
  - Files: `src/mock/factories/jobFactory.ts`
  - Tests: `src/mock/factories/__tests__/jobFactory.test.ts`

- [x] **Assignment Factory**
  - Description: Generate mock assignments
  - Files: `src/mock/factories/assignmentFactory.ts`
  - Tests: `src/mock/factories/__tests__/assignmentFactory.test.ts`

- [x] **Snapshot Factory**
  - Description: Generate full ScheduleSnapshot
  - Files: `src/mock/factories/snapshotFactory.ts`
  - Tests: `src/mock/factories/__tests__/snapshotFactory.test.ts`

### Page Update

- [x] **SchedulingPage**
  - Description: Update to use new MainLayout
  - Files: `src/pages/SchedulingPage.tsx` (modify)
  - Tests: via layout tests

---

## Testing Requirements

### Unit Tests

- [x] MainLayout renders 3-column structure
- [x] MainLayout handles panel collapse state
- [x] LeftPanel collapses to 48px when collapsed
- [x] RightPanel collapses to 48px when collapsed
- [x] CenterPanel expands when side panels collapse
- [x] PanelHeader toggle button works
- [x] Panel collapse persists in Redux state
- [x] Mock factories generate valid data

### Visual Testing

- [ ] Storybook stories for MainLayout (deferred to future release)
- [ ] Storybook stories for each panel component (deferred to future release)
- [ ] Responsive behavior verified in Storybook (deferred to future release)

---

## Definition of Done

All items must be checked for the release to be considered complete:

- [x] All feature checklist items completed
- [x] All unit tests passing (73 tests)
- [x] ESLint passing
- [x] TypeScript build passing
- [ ] Storybook stories created (deferred)
- [x] Code reviewed and approved
- [x] Git tag created: `v0.3.2`

---

## Release Notes Draft

```markdown
## v0.3.2 – Layout Components

**Release Date:** 2025-12-14

### Summary

Restructures the frontend layout to a 3-column design matching the UX/UI specification.

### What's New

- **3-Column Layout** - Left Panel / Center Grid / Right Panel structure
- **Collapsible Panels** - Side panels can be collapsed to icons
- **Responsive Breakpoints** - Panels auto-collapse on smaller screens
- **Mock Data Factories** - For Storybook stories and unit tests
- **Test Infrastructure** - Vitest + Testing Library configured with 73 unit tests

### Technical

- React 19 + TypeScript
- Tailwind CSS 4 for styling
- Redux Toolkit for panel state
- Vitest for unit testing
```

---

## Post-Release

- [x] Git tag created
- [ ] Next release (v0.3.3 - Jobs List) ready to start
