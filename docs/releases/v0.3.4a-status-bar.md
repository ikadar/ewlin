# Release v0.3.4a – Left Panel - Status Bar

> **Status:** ✅ Released
>
> **Milestone:** M3 (Frontend Integration)
>
> **Release Date:** 2025-12-14
>
> **Git Tag:** `v0.3.4a`

---

## Overview

This release implements the Status Bar component for the Left Panel. The Status Bar displays job-level approval and material status information when a job is selected. It shows BAT (proof) status, plates status, and paper procurement status with visual icons and tooltips.

Key deliverables:
- StatusBar component (shown when job selected)
- BAT status indicator with 4 states
- Plates status indicator with 2 states
- Paper status indicator with 4 states
- Tooltips on hover with full status text

---

## Prerequisites

- [x] `v0.3.4` released (Task List)
- [x] Job types with proof/plates/paper fields defined
- [x] Redux store with `selectedJobId` state

---

## Scope

### In Scope

- StatusBar component displayed between JobsList and TaskList
- BAT status icon (⚠ Awaiting / ○ Sent / ✓ Approved / — No proof)
- Plates status icon (○ Todo / ✓ Done)
- Paper status icon (InStock / ToOrder / Ordered / Received)
- Tooltip on hover showing full status text
- Unit tests for StatusBar component

### Out of Scope

- Status editing (done via job edit modal - future release)
- Date Navigation Strip (v0.3.4b)
- Comments access/popover

---

## Related Documentation

### UX/UI

| Document | Sections |
|----------|----------|
| [Left Panel](../ux-ui/05-components/left-panel.md) | Status Bar section |

### Types

| Type | Fields |
|------|--------|
| Job | `proofSentAt`, `proofApprovedAt`, `platesStatus`, `paperPurchaseStatus` |

---

## Technical Notes

### Component Structure

```
LeftPanel/
├── StatusBar/
│   ├── StatusBar.tsx       # Main container
│   ├── BatStatusIcon.tsx   # BAT/proof status icon
│   ├── PlatesStatusIcon.tsx # Plates status icon
│   ├── PaperStatusIcon.tsx # Paper status icon
│   └── index.ts
```

### BAT Status Logic

Based on `proofSentAt` and `proofApprovedAt` fields:

| proofSentAt | proofApprovedAt | Status | Icon |
|-------------|-----------------|--------|------|
| null or "AwaitingFile" | null | Awaiting file | ⚠ (warning) |
| ISO date | null | Sent | ○ (circle) |
| ISO date | ISO date | Approved | ✓ (check) |
| "NoProofRequired" | - | No proof required | — (dash) |

### Plates Status

Based on `platesStatus` field:
- `Todo` → ○ (circle outline)
- `Done` → ✓ (check)

### Paper Status

Based on `paperPurchaseStatus` field:
- `InStock` → Green indicator
- `ToOrder` → Yellow indicator
- `Ordered` → Blue indicator
- `Received` → Green check

---

## Feature Checklist

### Components

- [x] **StatusBar**
  - Description: Main container showing all status icons
  - Files: `src/components/left-panel/StatusBar/StatusBar.tsx`
  - Tests: `src/components/left-panel/StatusBar/__tests__/StatusBar.test.tsx`

- [x] **BatStatusIcon**
  - Description: BAT/proof status icon with tooltip
  - Files: `src/components/left-panel/StatusBar/BatStatusIcon.tsx`
  - Tests: `src/components/left-panel/StatusBar/__tests__/StatusBar.test.tsx`

- [x] **PlatesStatusIcon**
  - Description: Plates status icon with tooltip
  - Files: `src/components/left-panel/StatusBar/PlatesStatusIcon.tsx`
  - Tests: `src/components/left-panel/StatusBar/__tests__/StatusBar.test.tsx`

- [x] **PaperStatusIcon**
  - Description: Paper status icon with tooltip
  - Files: `src/components/left-panel/StatusBar/PaperStatusIcon.tsx`
  - Tests: `src/components/left-panel/StatusBar/__tests__/StatusBar.test.tsx`

### Integration

- [x] **LeftPanel Integration**
  - Description: Add StatusBar between JobsList and TaskList
  - Files: `src/components/layout/LeftPanel.tsx` (modify)
  - Tests: via component tests

---

## Testing Requirements

### Unit Tests

- [x] StatusBar renders nothing when no job selected
- [x] StatusBar shows all three status icons when job selected
- [x] BatStatusIcon shows warning for awaiting file
- [x] BatStatusIcon shows circle for sent
- [x] BatStatusIcon shows check for approved
- [x] BatStatusIcon shows dash for no proof required
- [x] PlatesStatusIcon shows circle for todo
- [x] PlatesStatusIcon shows check for done
- [x] PaperStatusIcon shows correct state for each status
- [x] Tooltips display correct text on hover

### Visual Testing

- [x] StatusBar displays between JobsList and TaskList (manual)
- [x] Icons visually distinct (manual)
- [x] Tooltips appear on hover (manual)

---

## Definition of Done

All items must be checked for the release to be considered complete:

- [x] All feature checklist items completed
- [x] All unit tests passing (148 tests)
- [x] ESLint passing
- [x] TypeScript build passing
- [x] Code reviewed and approved
- [x] Git tag created: `v0.3.4a`

---

## Release Notes Draft

```markdown
## v0.3.4a – Left Panel - Status Bar

**Release Date:** 2025-12-14

### Summary

Implements the Status Bar component for the Left Panel, showing job approval and material status information.

### What's New

- **StatusBar Component** - Displays status icons when job is selected
- **BAT Status** - Shows proof approval state (Awaiting/Sent/Approved/No proof)
- **Plates Status** - Shows plates preparation state (Todo/Done)
- **Paper Status** - Shows paper procurement state (InStock/ToOrder/Ordered/Received)
- **Tooltips** - Full status text on hover

### Technical

- React 19 + TypeScript
- Lucide icons for status indicators
- Tailwind CSS for styling
```

---

## Post-Release

- [x] Git tag created
- [x] Next release (v0.3.4b - Date Navigation Strip) ready to start
