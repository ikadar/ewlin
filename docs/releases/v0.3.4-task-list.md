# Release v0.3.4 – Left Panel - Task List

> **Status:** ✅ Released
>
> **Milestone:** M3 (Frontend Integration)
>
> **Release Date:** 2025-12-14
>
> **Git Tag:** `v0.3.4`

---

## Overview

This release implements the Task List component for the Left Panel. The Task List displays tasks for the selected job in sequence order, with visual distinction between scheduled and unscheduled tasks. Users can click to jump to scheduled tiles, double-click to recall them, and reorder tasks via drag & drop.

Key deliverables:
- TaskList component showing tasks for selected job
- TaskListItem mini-tiles with setup+run duration display
- Visual distinction for scheduled vs unscheduled tasks (opacity)
- Single-click to scroll grid to scheduled task
- Double-click to recall (unassign) scheduled task
- Hover buttons: "Jump to" and "Recall"
- Drag within list to reorder task sequence

---

## Prerequisites

- [x] `v0.3.3` released (Jobs List)
- [x] Redux store with `selectedJobId` state
- [x] Types defined: Task, TaskStatus, Assignment

---

## Scope

### In Scope

- TaskList component with tasks from selected job
- TaskListItem mini-tile component
- Scheduled vs unscheduled visual states (opacity difference)
- Single-click on scheduled task → dispatch action (scroll to grid - stub for now)
- Double-click on scheduled task → dispatch recall action (stub for now)
- Hover buttons: "Jump to" and "Recall" (stub actions)
- Drag to reorder task sequence within list
- Empty state when no job selected or no tasks
- Unit tests for all components

### Out of Scope

- Actual grid scrolling (requires Center Panel - v0.3.5+)
- API integration for recall (DELETE /api/v1/tasks/{taskId}/assign)
- API integration for reorder (PUT /api/v1/jobs/{id}/tasks/reorder)
- Status Bar (v0.3.4a)
- Date Navigation Strip (v0.3.4b)

---

## Related Documentation

### UX/UI

| Document | Sections |
|----------|----------|
| [Left Panel](../ux-ui/05-components/left-panel.md) | Task List section |
| [Tile Recall](../ux-ui/01-interaction-patterns/tile-recall.md) | Recall interactions |

### Architecture

| Document | Sections |
|----------|----------|
| Types | Task, TaskStatus, Assignment |

---

## Technical Notes

### Component Structure

```
LeftPanel/
├── TaskList/
│   ├── TaskList.tsx         # Main container with task list
│   ├── TaskListItem.tsx     # Individual task mini-tile
│   └── index.ts
```

### Task Mini-Tile Content

Each mini-tile displays:
- Station/Provider name (from stationName or providerName)
- Duration: setupMinutes + runMinutes (internal) or durationOpenDays (outsourced)
- Task type indicator (optional: internal vs outsourced icon)

### Visual States

| State | Appearance |
|-------|------------|
| Unscheduled | Full opacity (100%) |
| Scheduled | Lower opacity (50%) |
| Hover (scheduled) | Show "Jump to" and "Recall" buttons |

### Scheduled Detection

A task is "scheduled" if there exists an Assignment in `snapshot.assignments` where `assignment.taskId === task.id`.

### Stub Actions

Since Center Panel doesn't exist yet, dispatch actions that will be handled later:
- `scrollToTask(taskId)` - will scroll grid to tile position
- `recallTask(taskId)` - will call DELETE /api/v1/tasks/{taskId}/assign

### Task Reordering

Drag & drop within the list changes `task.sequenceOrder`. For now, update local state only (no API call).

---

## Feature Checklist

### Components

- [x] **TaskList**
  - Description: Main container showing tasks for selected job
  - Files: `src/components/left-panel/TaskList/TaskList.tsx`
  - Tests: `src/components/left-panel/TaskList/__tests__/TaskList.test.tsx`

- [x] **TaskListItem**
  - Description: Single task mini-tile with hover buttons
  - Files: `src/components/left-panel/TaskList/TaskListItem.tsx`
  - Tests: `src/components/left-panel/TaskList/__tests__/TaskListItem.test.tsx`

### State Management

- [x] **Task Actions**
  - Description: Add scrollToTask, recallTask actions to uiSlice
  - Files: `src/store/uiSlice.ts` (modify)
  - Tests: `src/store/__tests__/uiSlice.test.ts` (extend)

### Integration

- [x] **LeftPanel Integration**
  - Description: Add TaskList below JobsList
  - Files: `src/components/layout/LeftPanel.tsx` (modify)
  - Tests: via component tests

---

## Testing Requirements

### Unit Tests

- [x] TaskList renders empty state when no job selected
- [x] TaskList renders empty state when job has no tasks
- [x] TaskList renders task list in sequence order
- [x] TaskListItem displays station/provider name
- [x] TaskListItem displays duration correctly (internal)
- [x] TaskListItem displays duration correctly (outsourced)
- [x] TaskListItem shows full opacity for unscheduled tasks
- [x] TaskListItem shows reduced opacity for scheduled tasks
- [x] TaskListItem shows hover buttons on mouse enter
- [x] TaskListItem hides hover buttons on mouse leave
- [x] Single-click dispatches scrollToTask action
- [x] Double-click dispatches recallTask action
- [x] "Jump to" button dispatches scrollToTask action
- [x] "Recall" button dispatches recallTask action
- [x] Drag reorders tasks locally

### Visual Testing

- [x] TaskList displays in LeftPanel (manual)
- [x] Opacity difference visible (manual)
- [x] Hover buttons appear (manual)

---

## Definition of Done

All items must be checked for the release to be considered complete:

- [x] All feature checklist items completed
- [x] All unit tests passing (129 tests)
- [x] ESLint passing
- [x] TypeScript build passing
- [x] Code reviewed and approved
- [x] Git tag created: `v0.3.4`

---

## Release Notes

```markdown
## v0.3.4 – Left Panel - Task List

**Release Date:** 2025-12-14

### Summary

Implements the Task List component for the Left Panel, showing tasks for the selected job with interaction support.

### What's New

- **TaskList Component** - Displays tasks for selected job in sequence order
- **Task Mini-Tiles** - Shows station/provider and duration
- **Scheduled State** - Visual distinction via opacity (scheduled = 50%)
- **Click Interactions** - Single-click to scroll, double-click to recall
- **Hover Buttons** - "Jump to" and "Recall" buttons on hover
- **Task Reordering** - Drag to reorder tasks within list

### Technical

- React 19 + TypeScript
- Redux Toolkit for task actions
- dnd-kit for drag & drop
- Tailwind CSS for styling
```

---

## Post-Release

- [x] Git tag created
- [x] Next release (v0.3.4a - Status Bar) ready to start
