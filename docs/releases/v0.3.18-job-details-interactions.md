# Release v0.3.18 â€“ Job Details Task Interactions

> **Status:** ðŸŸ¢ Released
>
> **Milestone:** M3 (Frontend Integration)
>
> **Release Date:** 2025-12-17
>
> **Git Tag:** `v0.3.18`

---

## Overview

Enhanced task interactions in the Job Details Panel. Users can double-click a task to recall it from the schedule, or single-click to jump to its position on the grid. These interactions improve the scheduling workflow by providing quick access to scheduled tasks.

---

## Prerequisites

- [x] v0.3.17 - Keyboard Shortcuts released
- [x] Job Details Panel with task list
- [x] Task recall functionality (existing implementation recalls from grid)
- [x] Grid scroll capability

---

## Scope

### In Scope

- **R1: Double-click recall** - Double-click on a scheduled task in the Job Details Panel to unschedule it (remove from grid)
- **R2: Single-click jump** - Single-click on a scheduled task in the Job Details Panel to scroll the grid to that tile's position

### Out of Scope

- Right-click context menus (post-MVP)
- Drag-and-drop from Job Details Panel (separate feature)
- Multi-select recall (post-MVP)

---

## Related Documentation

### UX/UI Specification

| Document | Sections |
|----------|----------|
| [Tile Recall](../ux-ui/01-interaction-patterns/tile-recall.md) | From Job Details Panel |
| [Job Details Panel](../ux-ui/02-sidebar/job-details-panel.md) | Task list interactions |

### Domain Model

| Document | Sections |
|----------|----------|
| [Business Rules](../domain-model/business-rules.md) | Task unscheduling |

---

## Technical Notes

### Double-click Recall (R1)

When a scheduled task is double-clicked in the Job Details Panel:
1. Find the assignment for that task
2. Remove the assignment from the snapshot
3. Task returns to "unscheduled" state in the UI

```typescript
// In TaskRow component
const handleDoubleClick = () => {
  if (!isScheduled) return;

  const assignment = assignments.find(a => a.taskId === task.id);
  if (assignment) {
    onRecallTask(assignment.id);
  }
};
```

### Single-click Jump (R2)

When a scheduled task is single-clicked:
1. Find the assignment for that task
2. Calculate the grid position from `scheduledStart`
3. Scroll the grid to center that position
4. Optionally highlight/flash the tile

```typescript
// In TaskRow component
const handleClick = () => {
  if (!isScheduled) return;

  const assignment = assignments.find(a => a.taskId === task.id);
  if (assignment) {
    onJumpToTask(assignment);
  }
};
```

### Visual Feedback

- Scheduled tasks in Job Details Panel should have a distinct style (e.g., checkmark icon, different color)
- Cursor should indicate clickability (`cursor: pointer`)
- Consider hover state showing "Click to jump" or "Double-click to recall" tooltip

---

## Feature Checklist

### Job Details Panel

- [x] **Scheduled task visual indicator**
  - Description: Show visual distinction for scheduled vs unscheduled tasks
  - Files: `apps/web/src/components/JobDetailsPanel/TaskTile.tsx`

- [x] **Single-click jump handler**
  - Description: Click scheduled task to scroll grid to its position (both X and Y)
  - Files: `apps/web/src/components/JobDetailsPanel/TaskTile.tsx`, `apps/web/src/App.tsx`

- [x] **Double-click recall handler**
  - Description: Double-click scheduled task to unschedule it
  - Files: `apps/web/src/components/JobDetailsPanel/TaskTile.tsx`, `apps/web/src/App.tsx`

### Grid Integration

- [x] **Scroll to assignment position**
  - Description: Scroll grid to show a specific assignment centered (both X and Y)
  - Files: `apps/web/src/components/SchedulingGrid/SchedulingGrid.tsx`

- [ ] **Optional tile highlight on jump** (deferred)
  - Description: Briefly highlight the tile when jumping to it
  - Files: `apps/web/src/components/Tile/Tile.tsx`

---

## Testing Requirements

### Unit Tests

- [x] Click handler only triggers for scheduled tasks
- [x] Double-click handler only triggers for scheduled tasks
- [x] Grid scroll position calculation from assignment time

### Manual Testing

- [x] Single-click on scheduled task scrolls to correct position (X and Y)
- [x] Double-click on scheduled task removes it from schedule
- [x] Unscheduled tasks do not respond to click/double-click with jump/recall
- [x] Visual indicator clearly shows scheduled vs unscheduled state
- [x] Works correctly with multiple tasks per job

---

## Definition of Done

All items must be checked for the release to be considered complete:

- [x] All feature checklist items completed
- [x] All unit tests passing (453 tests)
- [x] TypeScript compiles without errors
- [x] Lint passes
- [x] Documentation updated
- [x] Merged to ux-ui-development branch

---

## Release Notes Draft

```markdown
## v0.3.18 â€“ Job Details Task Interactions

**Release Date:** 2025-12-17

### Summary

Enhanced task interactions in the Job Details Panel. Click on a scheduled task to jump to its position on the grid (both horizontally and vertically), or double-click to recall (unschedule) it.

### What's New

- Single-click on scheduled task: Jump to tile position on grid (X and Y scroll)
- Double-click on scheduled task: Recall (unschedule) the task
- Visual indicator for scheduled vs unscheduled tasks (cursor-pointer, hover state)

### Technical

- Extended SchedulingGridHandle with scrollToX, scrollTo, getScrollX, getViewportWidth
- Fixed scroll methods to preserve position on other axis
- Grid scroll integration with Job Details Panel through callback chain
- Click and double-click event handling in TaskTile component
```

---

## File Structure

```
apps/web/src/
â”œâ”€â”€ App.tsx                              # Jump/recall handlers
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Sidebar/
â”‚   â”‚   â””â”€â”€ TaskRow.tsx                  # Click handlers
â”‚   â”œâ”€â”€ SchedulingGrid/
â”‚   â”‚   â””â”€â”€ SchedulingGrid.tsx           # Scroll to position
â”‚   â””â”€â”€ Tile/
â”‚       â””â”€â”€ Tile.tsx                     # Optional highlight
```
